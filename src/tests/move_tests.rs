use crate::{
    board::Board,
    board_geometry_templates::{Bitboard, FILE_A, FILE_B, FILE_H, RANK_3, RANK_7, RANK_8},
    enums::PieceColor,
};

#[test]
pub fn pawn_moves_test1() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000001100000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000010000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };
    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.pawn_destinations(PieceColor::White),
        0b0000000000000000000000000000000000000010000000110000000000000000
    );
    assert_eq!(
        test_board.pawn_destinations(PieceColor::Black),
        0b0000000000000000000000000000000000000000000000000000001000000000
    );
}

#[test]
pub fn pawn_moves_test2() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000110000000000000000000000000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000100000010100000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };
    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.pawn_destinations(PieceColor::White),
        0b0000000000000000000000000011100000000000000000000000000000000000
    );
    assert_eq!(
        test_board.pawn_destinations(PieceColor::Black),
        0b0000000000000000000000000001000000011000000000000000000000000000
    );
}

#[test]
pub fn knight_moves_test1() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_knights: 0b0000000000000000000100000000000000000000000000000000001010000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_knights: 0b1000000000000010000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };
    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.knight_destinations(PieceColor::Black),
        0b0000100000100000010010000000010100000000000000000000000000000000
    );
    assert_eq!(
        test_board.knight_destinations(PieceColor::White),
        0b0010100001000100000000000100010000101101010010000010000000001000
    );
}

#[test]
pub fn knight_moves_test2() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000100000000000000010000000010100000000000000000000000000000000,
        white_knights: 0b0000000000000010000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000001000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000100000000001000000000000000100001010000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.knight_destinations(PieceColor::Black),
        0b0000000000000000000000000001000010000000000000001000000000000000
    );
    assert_eq!(
        test_board.knight_destinations(PieceColor::White),
        0b0000000000000000000000000000000000000000000000000000000000000000
    );
}

#[test]
pub fn bishop_moves_test1() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000011101111000000000000000000000000000000000000000000000000,
        white_knights: 0b0100001000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0010010000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0001000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b1000000100000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000100000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000001111011100000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000001000010,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000100100,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000010000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000010000001,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000001000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.bishop_destinations(PieceColor::White),
        0b0000000000010000000010000000010000000010000000010000000000000000
    );
    assert_eq!(
        test_board.bishop_destinations(PieceColor::Black),
        0b0000000000000000100000000100000000100000000100000000100000000000
    );
}

#[test]
pub fn bishop_moves_test2() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000000000010100,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000100000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0100000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000100000000000000000000000000,
        black_rooks: 0b0000000000000000000000000100000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.bishop_destinations(PieceColor::Black),
        0b0000000010100000000100000000100000000000000000000000000000000000
    );
    assert_eq!(
        test_board.bishop_destinations(PieceColor::White),
        0b0000000000000000000000000100000100100010000101000000000000000000
    );
}

#[test]
pub fn rook_moves_test1() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000001,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000010,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000001000,
        black_knights: 0b0000000000000000000000000000000000000000000000100000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b0000000000000000000000000000000000000000000000010000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.rook_destinations(PieceColor::White),
        0b0000000000000000000000000000000000000000000000100000001000001100
    );
    assert_eq!(
        test_board.rook_destinations(PieceColor::Black),
        FILE_A & !RANK_3
    );
}

#[test]
pub fn rook_moves_test2() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000011111111,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b1111111100000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.rook_destinations(PieceColor::Black),
        0b0000000011111111111111111111111111111111111111111111111111111111
    );
    assert_eq!(
        test_board.rook_destinations(PieceColor::White),
        0b1111111111111111111111111111111111111111111111111111111100000000
    )
}

#[test]
pub fn queen_moves_test1() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b1000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000010000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.queen_destinations(PieceColor::White),
        0b0111111111000000101000001001000010001000100001001000001010000001
    );
    assert_eq!(
        test_board.queen_destinations(PieceColor::Black),
        0b0000011111111101000001110000101000010010001000100100001010000010
    );
}

#[test]
pub fn linear_plus_digonal_moves_test1() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.linear_moves(42), // c6 square
        0b0000010000000100111110110000010000000100000001000000010000000100
    ); // expected output: c1, c2, c3, c4, c5, a6, b6, d6, e6, f6, g6, h6, c7, c8

    assert_eq!(
        test_board.diagonal_moves(23), // h3 square
        0b0000010000001000000100000010000001000000000000000100000000100000
    ); // expected output: f1, g2, g4, f5, e6, d7, c8

    assert_eq!(
        test_board.linear_moves(7), // h1 square
        0b1000000010000000100000001000000010000000100000001000000001111111
    ); // expected output: a1, b1, c1, d1, e1, f1, g1, h2, h3, h4, h5, h6, h7, h8

    assert_eq!(
        test_board.diagonal_moves(7), // h1 square
        0b0000000100000010000001000000100000010000001000000100000000000000
    ); // expected output: g2, f3, e4, d5, c6, b7, a8

    assert_eq!(
        test_board.linear_moves(63), // h8 square
        0b0111111110000000100000001000000010000000100000001000000010000000
    ); // excepted output: g8, f8, e8, d8, c8, b8, a8, h7, h6, h5, h4, h3, h2, h1

    assert_eq!(
        test_board.diagonal_moves(63), // h8 square
        0b0000000001000000001000000001000000001000000001000000001000000001
    ); // excepted output:g7, f6, e5, d4, c3, b2, a1

    assert_eq!(
        test_board.linear_moves(49), // b7 square
        0b0000001011111101000000100000001000000010000000100000001000000010
    ); // expected output: b1, b2, b3, b4, b5, b6, a7, c7, d7, e7, f7, g7, h7, b8

    assert_eq!(
        test_board.diagonal_moves(49), // b7 square
        0b0000010100000000000001010000100000010000001000000100000010000000
    ); // expected output: a8, c6, c8, a6, d5, e4, f3, g2, h1
}

#[test]
pub fn king_moves_test1() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000001110000010100000111000000000000000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000000000000000000000000001000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000010,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000001,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.king_destinations(PieceColor::White),
        0b0000000000000000000000000000000000000000000000000000000000000000
    );
    assert_eq!(
        test_board.king_destinations(PieceColor::Black),
        0b0000000000000000000000000000000000000000000000000000011100000100
    );
}

#[test]
pub fn king_moves_test2() -> () {
    let mut test_board: Board = Board {
        white_pawns: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_queens: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_king: 0b0000000000000001000000000000000000000000000000000000000000000000,
        white_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_pawns: 0b0000000000000000000000100000000000000000000000000000000000000000,
        black_knights: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_bishops: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_queens: 0b0000000100000000000000000000000000000000000000000000000000000000,
        black_king: 0b0000000000000000000000000000000000000000000000000000000000000000,
        black_rooks: 0b0000000000000000000000000000000000000000000000000000000000000000,
        white_occupancy: None,
        black_occupancy: None,
        total_occupancy: None,
    };

    test_board.white_occupancy();
    test_board.black_occupancy();
    test_board.total_occupancy();

    assert_eq!(
        test_board.king_destinations(PieceColor::White),
        0b0000001100000010000000110000000000000000000000000000000000000000
    );
}
